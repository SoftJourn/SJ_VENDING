<!doctype html>

<html lang="en" xmlns:th="http://www.thymeleaf.org">

<head>
    <meta charset="utf-8"/>
    <meta name="description" content=""/>
    <meta name="viewport" content="width=device-width, initial-scale=1"/>
    <meta name="generator" content="Polymer Starter Kit"/>
    <title>Vending admin</title>

    <!-- build:css styles/main.css -->
    <link rel="stylesheet" href="styles/main.css"/>
    <!-- endbuild-->

    <!-- build:js bower_components/webcomponentsjs/webcomponents-lite.min.js -->
    <script src="bower_components/webcomponentsjs/webcomponents-lite.js"></script>
    <!-- endbuild -->

    <!-- Because this project uses vulcanize this should be your only html import
         in this file. All other imports should go in elements.html -->
    <link rel="import" href="elements/elements.html"/>

    <!-- For shared styles, shared-styles.html import in elements.html -->
    <style is="custom-style" include="shared-styles"></style>

    <script th:inline="javascript">
        /*<![CDATA[*/

        const token = [[${token}]];
        function getToken() {
            return token
        }

        /*]]>*/
    </script>
</head>

<body unresolved>
<span id="browser-sync-binding"></span>
<template is="dom-bind" id="adminApp">

    <paper-drawer-panel id="paperDrawerPanel">
        <!-- Drawer Scroll Header Panel -->
        <paper-scroll-header-panel drawer fixed>

            <!-- Drawer Toolbar -->
            <paper-toolbar id="drawerToolbar">
                <span class="menu-name">Admin panel</span>
            </paper-toolbar>

            <admin-items-list
                    id="products"
                    name="Products"
                    data-th-attr="target-url=@{/v1/products}"
                    ignore="[&quot;id&quot;, &quot;price&quot;, &quot;imageUrl&quot;]">
            </admin-items-list>

            <admin-items-list
                    id="machines"
                    name="Vending machines"
                    data-th-attr="target-url=@{/v1/vending}"
                    ignore="[&quot;id&quot;,&quot;size&quot;, &quot;rows&quot;, &quot;fields&quot;]">
            </admin-items-list>


        </paper-scroll-header-panel>

        <!-- Main Area -->
        <paper-scroll-header-panel main id="headerPanelMain" condenses keep-condensed-header>
            <!-- Main Toolbar -->
            <paper-toolbar id="mainToolbar" class="tall">
                <paper-icon-button id="paperToggle" icon="menu" paper-drawer-toggle></paper-icon-button>

                <span class="space"></span>

                <!-- Toolbar icons -->
                <span>
                    <user-info admin="true" url="/ibeacon" id="userInfo"></user-info>
                </span>
                <!--<paper-icon-button icon="search"></paper-icon-button>-->

                <!-- Application name -->
                <div class="middle middle-container">
                    <div class="app-name">Vending machines admin.</div>
                </div>

            </paper-toolbar>

            <!-- Main Content -->
            <div class="content">
                <iron-pages attr-for-selected="data-route" selected="{{route}}">

                    <section data-route="product-edit">
                        <product-edit target-url="{{params.id}}"  data-th-attr="return-url=@{/admin}" id="productEdit"></product-edit>
                    </section>

                    <section data-route="machine-add">
                        <machine-create target-url="{{params.id}}" data-th-attr="return-url=@{/admin}" id="addMachine"></machine-create>
                    </section>

                    <section data-route="machine-edit">
                        <machine-edit data-th-attr="products-url=@{/v1/products}, return-url=@{/admin}" target-url="{{params.id}}" id="editMachine"></machine-edit>
                    </section>

                </iron-pages>
            </div>
        </paper-scroll-header-panel>
    </paper-drawer-panel>

    <paper-toast id="toast" duration="7000">
        <span class="toast-hide-button" role="button" tabindex="0" onclick="app.$.toast.hide()">Ok</span>
    </paper-toast>

</template>

<!-- build:js scripts/adminApp.js -->
<script src="scripts/adminApp.js"></script>
<!-- endbuild-->
</body>

</html>
